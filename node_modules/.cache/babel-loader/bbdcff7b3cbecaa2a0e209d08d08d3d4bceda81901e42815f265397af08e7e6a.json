{"ast":null,"code":"import { createRobotClient, StreamClient, SensorClient, CameraClient } from \"@viamrobotics/sdk\";\n\n/**\n * Given a set of credentials, get a robot client.\n *\n * @returns A connected client\n */\nexport const getRobotClient = async () => {\n  const host = 'bop2025-main.1qcq9pmop4.viam.cloud';\n  return createRobotClient({\n    host,\n    credential: {\n      // Changed from \"credentials\" to \"credential\"\n      type: 'api-key',\n      payload: 'hxtk88rojiq2pzc7nasiiymnbfxr1dyc',\n      authEntity: '2597529f-b98b-4e62-8c94-7f99501b0a76'\n    },\n    signalingAddress: \"https://app.viam.com:443\",\n    iceServers: [{\n      urls: \"stun:global.stun.twilio.com:3478\"\n    }]\n  });\n};\n\n/**\n * StreamClient factory\n *\n * @param client A connected RobotClient\n * @returns A connected stream client\n */\nexport const getStreamClient = client => {\n  return new StreamClient(client);\n};\n\n/**\n * CameraClient factory\n * \n * @param client A connected RobotClient\n * @param cameraName The name of the camera\n * @returns A connected camera client\n */\nexport const getCameraClient = (client, cameraName) => {\n  return new CameraClient(client, cameraName);\n};\n\n/**\n * Get a sensor client\n * \n * @param client A connected RobotClient\n * @param sensorName The name of the sensor\n * @returns A connected sensor client\n */\nexport const getSensorClient = (client, sensorName) => {\n  return new SensorClient(client, sensorName);\n};\n\n/**\n * Get a stream by name from a StreamClient.\n *\n * @param streamClient - The connected StreamClient.\n * @param name - The name of the camera.\n * @returns A MediaStream object that can be used in a <video>.\n */\nexport const getStream = async (streamClient, name) => {\n  const streamPromise = new Promise((resolve, reject) => {\n    const handleTrack = event => {\n      const stream = event.streams[0];\n      if (!stream) {\n        streamClient.off(\"track\", handleTrack);\n        reject(new Error(\"Received track event with no streams\"));\n      } else if (stream.id === name) {\n        streamClient.off(\"track\", handleTrack);\n        resolve(stream);\n      }\n    };\n    streamClient.on(\"track\", handleTrack);\n  });\n  await streamClient.add(name);\n  return streamPromise;\n};","map":{"version":3,"names":["createRobotClient","StreamClient","SensorClient","CameraClient","getRobotClient","host","credential","type","payload","authEntity","signalingAddress","iceServers","urls","getStreamClient","client","getCameraClient","cameraName","getSensorClient","sensorName","getStream","streamClient","name","streamPromise","Promise","resolve","reject","handleTrack","event","stream","streams","off","Error","id","on","add"],"sources":["/home/cjp7591/dev/dashboard/src/client.ts"],"sourcesContent":["import {\n    createRobotClient,\n    StreamClient,\n    BaseClient,\n    type RobotClient,\n    SensorClient,\n    CameraClient,\n  } from \"@viamrobotics/sdk\";\n  \n  /**\n   * Given a set of credentials, get a robot client.\n   *\n   * @returns A connected client\n   */\n  export const getRobotClient = async (): Promise<RobotClient> => {\n    const host = 'bop2025-main.1qcq9pmop4.viam.cloud';\n    \n    return createRobotClient({\n      host,\n      credential: {  // Changed from \"credentials\" to \"credential\"\n        type: 'api-key',\n        payload: 'hxtk88rojiq2pzc7nasiiymnbfxr1dyc',\n        authEntity: '2597529f-b98b-4e62-8c94-7f99501b0a76',\n      },\n      signalingAddress: \"https://app.viam.com:443\",\n      iceServers: [{ urls: \"stun:global.stun.twilio.com:3478\" }],\n    });\n  };\n  \n  /**\n   * StreamClient factory\n   *\n   * @param client A connected RobotClient\n   * @returns A connected stream client\n   */\n  export const getStreamClient = (client: RobotClient): StreamClient => {\n    return new StreamClient(client);\n  };\n  \n  /**\n   * CameraClient factory\n   * \n   * @param client A connected RobotClient\n   * @param cameraName The name of the camera\n   * @returns A connected camera client\n   */\n  export const getCameraClient = (client: RobotClient, cameraName: string): CameraClient => {\n    return new CameraClient(client, cameraName);\n  };\n  \n  /**\n   * Get a sensor client\n   * \n   * @param client A connected RobotClient\n   * @param sensorName The name of the sensor\n   * @returns A connected sensor client\n   */\n  export const getSensorClient = (client: RobotClient, sensorName: string): SensorClient => {\n    return new SensorClient(client, sensorName);\n  };\n  \n  /**\n   * Get a stream by name from a StreamClient.\n   *\n   * @param streamClient - The connected StreamClient.\n   * @param name - The name of the camera.\n   * @returns A MediaStream object that can be used in a <video>.\n   */\n  export const getStream = async (\n    streamClient: StreamClient,\n    name: string\n  ): Promise<MediaStream> => {\n    const streamPromise = new Promise<MediaStream>((resolve, reject) => {\n      const handleTrack = (event: RTCTrackEvent) => {\n        const stream = event.streams[0];\n  \n        if (!stream) {\n          streamClient.off(\"track\", handleTrack as (args: unknown) => void);\n          reject(new Error(\"Received track event with no streams\"));\n        } else if (stream.id === name) {\n          streamClient.off(\"track\", handleTrack as (args: unknown) => void);\n          resolve(stream);\n        }\n      };\n  \n      streamClient.on(\"track\", handleTrack as (args: unknown) => void);\n    });\n  \n    await streamClient.add(name);\n  \n    return streamPromise;\n  };"],"mappings":"AAAA,SACIA,iBAAiB,EACjBC,YAAY,EAGZC,YAAY,EACZC,YAAY,QACP,mBAAmB;;AAE1B;AACF;AACA;AACA;AACA;AACE,OAAO,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAkC;EAC9D,MAAMC,IAAI,GAAG,oCAAoC;EAEjD,OAAOL,iBAAiB,CAAC;IACvBK,IAAI;IACJC,UAAU,EAAE;MAAG;MACbC,IAAI,EAAE,SAAS;MACfC,OAAO,EAAE,kCAAkC;MAC3CC,UAAU,EAAE;IACd,CAAC;IACDC,gBAAgB,EAAE,0BAA0B;IAC5CC,UAAU,EAAE,CAAC;MAAEC,IAAI,EAAE;IAAmC,CAAC;EAC3D,CAAC,CAAC;AACJ,CAAC;;AAED;AACF;AACA;AACA;AACA;AACA;AACE,OAAO,MAAMC,eAAe,GAAIC,MAAmB,IAAmB;EACpE,OAAO,IAAIb,YAAY,CAACa,MAAM,CAAC;AACjC,CAAC;;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACE,OAAO,MAAMC,eAAe,GAAGA,CAACD,MAAmB,EAAEE,UAAkB,KAAmB;EACxF,OAAO,IAAIb,YAAY,CAACW,MAAM,EAAEE,UAAU,CAAC;AAC7C,CAAC;;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACE,OAAO,MAAMC,eAAe,GAAGA,CAACH,MAAmB,EAAEI,UAAkB,KAAmB;EACxF,OAAO,IAAIhB,YAAY,CAACY,MAAM,EAAEI,UAAU,CAAC;AAC7C,CAAC;;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACE,OAAO,MAAMC,SAAS,GAAG,MAAAA,CACvBC,YAA0B,EAC1BC,IAAY,KACa;EACzB,MAAMC,aAAa,GAAG,IAAIC,OAAO,CAAc,CAACC,OAAO,EAAEC,MAAM,KAAK;IAClE,MAAMC,WAAW,GAAIC,KAAoB,IAAK;MAC5C,MAAMC,MAAM,GAAGD,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC;MAE/B,IAAI,CAACD,MAAM,EAAE;QACXR,YAAY,CAACU,GAAG,CAAC,OAAO,EAAEJ,WAAsC,CAAC;QACjED,MAAM,CAAC,IAAIM,KAAK,CAAC,sCAAsC,CAAC,CAAC;MAC3D,CAAC,MAAM,IAAIH,MAAM,CAACI,EAAE,KAAKX,IAAI,EAAE;QAC7BD,YAAY,CAACU,GAAG,CAAC,OAAO,EAAEJ,WAAsC,CAAC;QACjEF,OAAO,CAACI,MAAM,CAAC;MACjB;IACF,CAAC;IAEDR,YAAY,CAACa,EAAE,CAAC,OAAO,EAAEP,WAAsC,CAAC;EAClE,CAAC,CAAC;EAEF,MAAMN,YAAY,CAACc,GAAG,CAACb,IAAI,CAAC;EAE5B,OAAOC,aAAa;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}