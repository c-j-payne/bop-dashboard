{"ast":null,"code":"// src/client.ts\nimport { createRobotClient, StreamClient, SensorClient, CameraClient } from \"@viamrobotics/sdk\";\nexport const getRobotClient = async () => {\n  const host = 'bop2025-main.1qcq9pmop4.viam.cloud';\n\n  // Use type assertion to bypass type checking\n  const config = {\n    host,\n    credential: {\n      // Try using \"credential\" (singular)\n      type: 'api-key',\n      payload: 'hxtk88rojiq2pzc7nasiiymnbfxr1dyc'\n    },\n    signalingAddress: \"https://app.viam.com:443\",\n    iceServers: [{\n      urls: \"stun:global.stun.twilio.com:3478\"\n    }]\n  };\n  return createRobotClient(config);\n};\nexport const getCameraClient = (client, cameraName) => {\n  return new CameraClient(client, cameraName);\n};\nexport const getSensorClient = (client, sensorName) => {\n  return new SensorClient(client, sensorName);\n};\nexport const getStreamClient = client => {\n  return new StreamClient(client);\n};\n\n// Add the missing getStream function\nexport const getStream = async (streamClient, name) => {\n  const streamPromise = new Promise((resolve, reject) => {\n    const handleTrack = event => {\n      const stream = event.streams[0];\n      if (!stream) {\n        streamClient.off(\"track\", handleTrack);\n        reject(new Error(\"Received track event with no streams\"));\n      } else if (stream.id === name) {\n        streamClient.off(\"track\", handleTrack);\n        resolve(stream);\n      }\n    };\n    streamClient.on(\"track\", handleTrack);\n  });\n  await streamClient.add(name);\n  return streamPromise;\n};","map":{"version":3,"names":["createRobotClient","StreamClient","SensorClient","CameraClient","getRobotClient","host","config","credential","type","payload","signalingAddress","iceServers","urls","getCameraClient","client","cameraName","getSensorClient","sensorName","getStreamClient","getStream","streamClient","name","streamPromise","Promise","resolve","reject","handleTrack","event","stream","streams","off","Error","id","on","add"],"sources":["/home/cjp7591/dev/dashboard/src/client.ts"],"sourcesContent":["// src/client.ts\nimport {\n    createRobotClient,\n    type RobotClient,\n    StreamClient,\n    SensorClient,\n    CameraClient,\n  } from \"@viamrobotics/sdk\";\n  \n  export const getRobotClient = async (): Promise<RobotClient> => {\n    const host = 'bop2025-main.1qcq9pmop4.viam.cloud';\n    \n    // Use type assertion to bypass type checking\n    const config = {\n      host,\n      credential: {  // Try using \"credential\" (singular)\n        type: 'api-key',\n        payload: 'hxtk88rojiq2pzc7nasiiymnbfxr1dyc',\n      },\n      signalingAddress: \"https://app.viam.com:443\",\n      iceServers: [{ urls: \"stun:global.stun.twilio.com:3478\" }],\n    } as any;\n    \n    return createRobotClient(config);\n  };\n  \n  export const getCameraClient = (client: RobotClient, cameraName: string): CameraClient => {\n    return new CameraClient(client, cameraName);\n  };\n  \n  export const getSensorClient = (client: RobotClient, sensorName: string): SensorClient => {\n    return new SensorClient(client, sensorName);\n  };\n  \n  export const getStreamClient = (client: RobotClient): StreamClient => {\n    return new StreamClient(client);\n  };\n  \n  // Add the missing getStream function\n  export const getStream = async (\n    streamClient: StreamClient,\n    name: string\n  ): Promise<MediaStream> => {\n    const streamPromise = new Promise<MediaStream>((resolve, reject) => {\n      const handleTrack = (event: RTCTrackEvent) => {\n        const stream = event.streams[0];\n  \n        if (!stream) {\n          streamClient.off(\"track\", handleTrack as (args: unknown) => void);\n          reject(new Error(\"Received track event with no streams\"));\n        } else if (stream.id === name) {\n          streamClient.off(\"track\", handleTrack as (args: unknown) => void);\n          resolve(stream);\n        }\n      };\n  \n      streamClient.on(\"track\", handleTrack as (args: unknown) => void);\n    });\n  \n    await streamClient.add(name);\n  \n    return streamPromise;\n  };"],"mappings":"AAAA;AACA,SACIA,iBAAiB,EAEjBC,YAAY,EACZC,YAAY,EACZC,YAAY,QACP,mBAAmB;AAE1B,OAAO,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAkC;EAC9D,MAAMC,IAAI,GAAG,oCAAoC;;EAEjD;EACA,MAAMC,MAAM,GAAG;IACbD,IAAI;IACJE,UAAU,EAAE;MAAG;MACbC,IAAI,EAAE,SAAS;MACfC,OAAO,EAAE;IACX,CAAC;IACDC,gBAAgB,EAAE,0BAA0B;IAC5CC,UAAU,EAAE,CAAC;MAAEC,IAAI,EAAE;IAAmC,CAAC;EAC3D,CAAQ;EAER,OAAOZ,iBAAiB,CAACM,MAAM,CAAC;AAClC,CAAC;AAED,OAAO,MAAMO,eAAe,GAAGA,CAACC,MAAmB,EAAEC,UAAkB,KAAmB;EACxF,OAAO,IAAIZ,YAAY,CAACW,MAAM,EAAEC,UAAU,CAAC;AAC7C,CAAC;AAED,OAAO,MAAMC,eAAe,GAAGA,CAACF,MAAmB,EAAEG,UAAkB,KAAmB;EACxF,OAAO,IAAIf,YAAY,CAACY,MAAM,EAAEG,UAAU,CAAC;AAC7C,CAAC;AAED,OAAO,MAAMC,eAAe,GAAIJ,MAAmB,IAAmB;EACpE,OAAO,IAAIb,YAAY,CAACa,MAAM,CAAC;AACjC,CAAC;;AAED;AACA,OAAO,MAAMK,SAAS,GAAG,MAAAA,CACvBC,YAA0B,EAC1BC,IAAY,KACa;EACzB,MAAMC,aAAa,GAAG,IAAIC,OAAO,CAAc,CAACC,OAAO,EAAEC,MAAM,KAAK;IAClE,MAAMC,WAAW,GAAIC,KAAoB,IAAK;MAC5C,MAAMC,MAAM,GAAGD,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC;MAE/B,IAAI,CAACD,MAAM,EAAE;QACXR,YAAY,CAACU,GAAG,CAAC,OAAO,EAAEJ,WAAsC,CAAC;QACjED,MAAM,CAAC,IAAIM,KAAK,CAAC,sCAAsC,CAAC,CAAC;MAC3D,CAAC,MAAM,IAAIH,MAAM,CAACI,EAAE,KAAKX,IAAI,EAAE;QAC7BD,YAAY,CAACU,GAAG,CAAC,OAAO,EAAEJ,WAAsC,CAAC;QACjEF,OAAO,CAACI,MAAM,CAAC;MACjB;IACF,CAAC;IAEDR,YAAY,CAACa,EAAE,CAAC,OAAO,EAAEP,WAAsC,CAAC;EAClE,CAAC,CAAC;EAEF,MAAMN,YAAY,CAACc,GAAG,CAACb,IAAI,CAAC;EAE5B,OAAOC,aAAa;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}